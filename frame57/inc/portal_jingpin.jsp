<%@ page contentType="text/html; charset=UTF-8" %>
<div style="position: absolute;left: 0px;top:170px;width: 1280px;height: 510px;display: none;" id="jingpin">
    <div style="position: absolute;left:56px;top:0px;width: 596px;height: 334px;" id="jingpindiv">
        <div style="position: absolute;left:0px;top:0px;width: 596px;height: 334px;">
            <img src="images/btn_trans.gif" id="jingpinimg" width="596" height="334">
            <img src="images/portal/jingpin/4.png"
                 style="position: absolute;left:0px;top:296px;width: 596px;height: 38px;">
            <font id="jingpinName"
                  style="position:absolute; width: 577px; height: 38px; font-size:25px; left: 18px; top: 296px; line-height:38px;color: #fff;" class="font_ellipsis"></font>
        </div>
    </div>
    <div style="position: absolute;left:56px;top:336px;width: 149px;height: 85px;" id="jingpindiv0">
        <div>
            <img src="images/btn_trans.gif" id="jingpinimg0">
            <font id="jingpinName_0"
                  style="position:absolute; width: 149px; height: 74px; font-size:30px; left: 120px; top: 0px; line-height:74px;color: #fff;"></font>
        </div>
    </div>
    <div style="position: absolute;left:205px;top:336px;width: 149px;height: 85px;" id="jingpindiv1">
        <div>
            <img src="images/btn_trans.gif" id="jingpinimg1">
            <font id="jingpinName_1"
                  style="position:absolute; width: 254px; height: 66px; font-size:30px; left: 0px; top: 0px; line-height:66px;color: #fff;text-align:center;"></font>
        </div>
    </div>
    <div style="position: absolute;left:354px;top:336px;width: 149px;height: 85px;" id="jingpindiv2">
        <div>
            <img src="images/btn_trans.gif" id="jingpinimg2">
            <font id="jingpinName_2"
                  style="position:absolute; width: 254px; height: 66px; font-size:30px; left: 0px; top: 0px; line-height:66px;color: #fff;text-align:center;"></font>
        </div>
    </div>
    <div style="position: absolute;left:503px;top:336px;width: 149px;height: 85px;" id="jingpindiv3">
        <div>
            <img src="images/btn_trans.gif" id="jingpinimg3">
            <font id="jingpinName_3"
                  style="position:absolute; width: 254px; height: 66px; font-size:30px; left: 0px; top: 0px; line-height:66px;color: #fff;text-align:center;"></font>
        </div>
    </div>

    <div style="position: absolute;left:671px;top:0px;width: 278px;height: 132px;" id="jingpindiv4">
        <div style="position: absolute;left:0px;top:0px;width: 289px;height: 154px;">
            <img src="images/btn_trans.gif" id="jingpinimg4">
            <img src="images/portal/jingpin/3.png"
                 style="position: absolute;left:0px;top:93px;width: 278px;height: 39px;">
            <font id="jingpinName_4"
                  style="position:absolute; width: 260px; height: 39px; font-size:22px; left: 18px; top: 93px; line-height:39px;color: #fff;" class="font_ellipsis"></font>
        </div>

    </div>
    <div style="position: absolute;left:671px;top:145px;width: 278px;height: 132px;" id="jingpindiv5">
        <div style="position: absolute;left:0px;top:0px;width: 278px;height: 132px;">
            <img src="images/btn_trans.gif" id="jingpinimg5">
            <img src="images/portal/jingpin/3.png"
                 style="position: absolute;left:0px;top:93px;width: 278px;height: 39px;">
            <font id="jingpinName_5"
                  style="position:absolute; width: 260px; height: 39px; font-size:22px; left: 18px; top: 93px; line-height:39px;color: #fff;" class="font_ellipsis"></font>
        </div>
    </div>
    <div style="position: absolute;left:671px;top:289px;width: 278px;height: 132px;" id="jingpindiv6">
        <div style="position: absolute;left:0px;top:0px;width: 278px;height: 132px;">
            <img src="images/btn_trans.gif" id="jingpinimg6">
            <img src="images/portal/jingpin/3.png"
                 style="position: absolute;left:0px;top:93px;width: 278px;height: 39px;">
            <font id="jingpinName_6"
                  style="position:absolute; width: 260px; height: 39px; font-size:22px; left: 18px; top: 93px; line-height:39px;color: #fff;" class="font_ellipsis"></font>
        </div>
    </div>

    <div style="position: absolute;left:970px;top:0px;width: 241px;height: 204px;" id="jingpindiv7">
        <div style="position: absolute;left:0px;top:0px;width: 241px;height: 204px;">
            <img src="images/btn_trans.gif" id="jingpinimg7">
            <img src="images/portal/jingpin/2.png"
                 style="position: absolute;left:0px;top:166px;width: 241px;height: 38px;">
            <font id="jingpinName_7"
                  style="position:absolute; width: 222px; height: 38px; font-size:22px; left: 18px; top: 166px; line-height:38px;color: #fff;" class="font_ellipsis"></font>
        </div>
    </div>

    <div style="position: absolute;left:970px;top:218px;width: 241px;height: 204px;" id="jingpindiv8">
        <div style="position: absolute;left:0px;top:0px;width: 241px;height: 204px;">
            <img src="images/btn_trans.gif" id="jingpinimg8">
            <img src="images/portal/jingpin/2.png"
                 style="position: absolute;left:0px;top:166px;width: 241px;height: 38px;">
            <font id="jingpinName_8"
                  style="position:absolute; width: 222px; height: 38px; font-size:22px; left: 18px; top: 166px; line-height:38px;color: #fff;" class="font_ellipsis"></font>
        </div>
    </div>

    <%
        for(int i=0;i<7;i++){
    %>
    <div style="position: absolute;left:<%=56+i*167%>px;top:434px;width: 153px;height: 84px;" id="jingpindiv<%=9+i%>">
        <img src="images/btn_trans.gif" id="jingpinimg<%=9+i%>">
    </div>
    <%
        }
    %>

    <div style="position: absolute;left:37px;top:-19px;width: 254px;height: 171px;visibility: hidden;"
         id="jingpinfocus">
        <img src="images/portal/jingpin/f0.png" id="jingpinfocusimg" >
    </div>
</div>
<script type="text/javascript">
    function returnJingpinObj(){
        this.objArray = jingpinJSON;
        this.posterIndex = -1;
        this.xunhuangIndex=0;
        this.timer=null;
        this.timer1=null;
        this.left = function () {
            if (this.posterIndex ==-1||this.posterIndex ==0||this.posterIndex ==9) {
                return;
            }
            this.posterblur();
            clearTimeout(this.timer1);
            if (this.posterIndex == 4||this.posterIndex == 5) {
                this.posterIndex = -1;
            } else if (this.posterIndex == 6) {
                this.posterIndex = 3;
            } else if (this.posterIndex == 7) {
                this.posterIndex = 4;
            } else if (this.posterIndex == 8) {
                this.posterIndex = 6;
            } else if((this.posterIndex >-1&& this.posterIndex <3)){
                this.posterIndex--;
                this.xunhuangIndex=this.posterIndex;
            }else {
                this.posterIndex--;
            }
            this.timer1=setTimeout(function(){
                jingpinObj.posterfocus();
            },300);
//            this.posterfocus();
        }
        this.right = function () {
            if (this.posterIndex ==7||this.posterIndex ==8||this.posterIndex ==15) {
                return;
            }
            this.posterblur();
            clearTimeout(this.timer1);
            if (this.posterIndex ==4||this.posterIndex ==5) {
                this.posterIndex = 7;
            } else if (this.posterIndex == 6) {
                this.posterIndex = 8;
            } else if (this.posterIndex == 3) {
                this.startPoster();
                this.posterIndex = 6;
            }else if(this.posterIndex ==-1){
                this.posterIndex = 4;
            }else if((this.posterIndex >-1&& this.posterIndex <3)){
                this.posterIndex++;
                this.xunhuangIndex=this.posterIndex;
            } else {
                this.posterIndex++;
            }
            this.timer1=setTimeout(function(){
                jingpinObj.posterfocus();
            },300);
//            this.posterfocus();
        }
        this.down = function () {
            if (this.posterIndex >8) {
                return;
            }
            this.posterblur();
            clearTimeout(this.timer1);
            if ((this.posterIndex >-1&& this.posterIndex <4)) {
//            alert("======down========="+this.posterIndex);
                this.posterIndex+= 9;
                this.startPoster();
            }else if(this.posterIndex ==6||this.posterIndex ==8){
                this.posterIndex+= 7;
            }else if(this.posterIndex==-1){
//            console.log("====this.xunhuangIndex==="+this.xunhuangIndex);
                this.posterIndex=this.xunhuangIndex;
            } else {
                this.posterIndex++;
            }
            this.timer1=setTimeout(function(){
                jingpinObj.posterfocus();
            },300);
//            this.posterfocus();
        }
        this.up = function () {
            if (this.posterIndex == -1 || this.posterIndex == 4 || this.posterIndex == 7) {
//               setTimeout(function(){
                clearTimeout(this.timer1);
                   areaFlag = 0;
                   jingpinObj.posterblur();
                   dom("navigation").style.visibility="visible";
//               },300);
                return;
            }
            this.posterblur();
            clearTimeout(this.timer1);
            if ((this.posterIndex >-1&& this.posterIndex <4)) {
                this.startPoster();
                this.posterIndex = -1;
            } else if(this.posterIndex >12){
                this.posterIndex-= 7;
            }else if((this.posterIndex >8&& this.posterIndex <13)){
//            this.posterIndex-= 9;
                this.posterIndex=this.xunhuangIndex;
            }else {
                this.posterIndex--;
            }
            this.timer1=setTimeout(function(){
                jingpinObj.posterfocus();
            },300);
//            this.posterfocus();
        }
        this.ok = function () {
            var leefocus=areaFlag+"|"+navigationObj.posterIndex+"|"+this.posterIndex;
            var url=this.objArray[this.posterIndex].linkURL;
            if(url==""){
                return;
            }
            if(this.posterIndex>-1&&this.posterIndex<4){
                return;
            }
            if(this.posterIndex==-1){
                url= this.objArray[this.xunhuangIndex].linkURL;
            }
            if(url.indexOf("?")>-1){
                url=url+"&leefocus="+leefocus;
            }else{
                url=url+"?leefocus="+leefocus;
            }
            document.location=url;
        }
        this.colsePoster=function(){
            clearTimeout(this.timer);

        }
        this.startPoster=function(){
            this.timer=setTimeout(function(){
                if(jingpinObj.xunhuangIndex<3){
                    jingpinObj.xunhuangIndex++;
                } else{
                    jingpinObj.xunhuangIndex=0;
                }
                dom("jingpinimg").src=jingpinObj.objArray[jingpinObj.xunhuangIndex+16].images;
//                dom("jingpinName").innerText=jingpinObj.objArray[jingpinObj.xunhuangIndex].name;
                if(jingpinObj.posterIndex==-1){
                    stopScroll("jingpinName",jingpinObj.objArray[jingpinObj.xunhuangIndex+16].name);
                }
                jingpinObj.startPoster();
            },5000);
        }
        //加载数据
        this.showObj = function () {
            for(var i=0;i<16;i++){
                dom("jingpinimg" +i).src=this.objArray[i].images;
                if(i>3&&i<9){
//                    dom("jingpinName_"+i).innerText=this.objArray[i].name;
                    stopScroll("jingpinName_" +i,this.objArray[i].name);
                }
            }
        }
        //图片获取焦点所执行的方法
        this.posterfocus = function () {
            if(this.posterIndex>-1&&this.posterIndex<4){
                this.colsePoster();
                jingpinObj.xunhuangIndex=this.posterIndex;
//                alert((jingpinObj.xunhuangIndex+16)+"========================"+(jingpinObj.objArray[jingpinObj.xunhuangIndex+16].images))
                dom("jingpinimg").src=jingpinObj.objArray[jingpinObj.xunhuangIndex+16].images;
//                dom("jingpinName").innerText=jingpinObj.objArray[jingpinObj.xunhuangIndex].name;
                stopScroll("jingpinName",jingpinObj.objArray[jingpinObj.xunhuangIndex].name);
            }
            dom("jingpinfocus").style.visibility = "visible";
//            dom("jingpinfocus").style.webkitTransitionDuration = 300;
            var leftdiv=0;
            var topdiv=0;
            if(this.posterIndex==-1){
                leftdiv = dom("jingpindiv" ).style.left;
                topdiv = dom("jingpindiv" ).style.top;
                dom("jingpinfocus").style.zIndex = 99;
                dom("jingpindiv").style.zIndex = 99;
                dom("jingpinfocus").style.webkitTransitionDuration = 0;
            }else{
                leftdiv = dom("jingpindiv" + this.posterIndex).style.left;
                topdiv = dom("jingpindiv" + this.posterIndex).style.top;
                dom("jingpinfocus").style.zIndex = 99;
                dom("jingpindiv" + jingpinObj.posterIndex).style.zIndex = 99;
                dom("jingpinfocus").style.webkitTransitionDuration = 300;
            }

            dom("jingpinfocus").style.left = -19 + parseInt(leftdiv, 10);
            dom("jingpinfocus").style.top = -19 + parseInt(topdiv, 10);
            if (this.posterIndex > -1 && this.posterIndex < 4) {
                dom("jingpinfocusimg").src = "images/portal/jingpin/f1.png";
            } else if (this.posterIndex == 4||this.posterIndex == 5 || this.posterIndex == 6) {
                dom("jingpinfocusimg").src = "images/portal/jingpin/f3.png";
            } else if (this.posterIndex == -1) {
                dom("jingpinfocusimg").src = "images/portal/jingpin/f0.png";
            } else if (this.posterIndex == 7 || this.posterIndex == 8) {
                dom("jingpinfocusimg").src = "images/portal/jingpin/f2.png";
            } else {
                dom("jingpinfocusimg").src = "images/portal/jingpin/f4.png";
            }
             if(this.posterIndex==-1){
                // alert("=========huwenxi==========="+this.objArray[this.xunhuangIndex].name);
               starScroll("jingpinName",this.objArray[this.xunhuangIndex].name,dom("jingpinName").style.width);
           }else if(!(this.posterIndex>-1&&this.posterIndex<4)){
                 if(this.objArray[this.posterIndex].name!=""){
                     starScroll("jingpinName_" + this.posterIndex,this.objArray[this.posterIndex].name,dom("jingpindiv" + this.posterIndex).style.width);
                 }
             }
        }
        // 图片失去焦点执行的方法
        this.posterblur = function () {
            if(this.posterIndex==-1){
                dom("jingpindiv").style.zIndex = 1;
                if(this.objArray.length==0) return;
               // alert("========huwenxi==1111=========")
//                stopScroll("jingpinName" ,this.objArray[this.xunhuangIndex].name);
                dom("jingpinName" ).innerText =subStringFunction(this.objArray[this.xunhuangIndex].name,1,500);
            }else{
                dom("jingpindiv" + this.posterIndex).style.zIndex = 1;
                if(this.objArray.length==0) return;
                if(!(this.posterIndex>-1&&this.posterIndex<4)){
                    if(this.objArray[this.posterIndex].name!=""){
                        stopScroll("jingpinName_" + this.posterIndex,this.objArray[this.posterIndex].name);
                    }
                }
            }
            dom("jingpinfocus").style.visibility = "hidden";
        }
    }

</script>
