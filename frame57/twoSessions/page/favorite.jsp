<%@ include file = "config/param.jsp"%>
<%@ include file = "config/code.jsp"%>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="page-view-size" content="1280*720">
<title>各省</title>
<link rel="stylesheet" type="text/css" href="css/public.css" />
<style>
body {
	 background:url("images/bg.png") no-repeat;
}
/*-------------------------------------------------------*/
.themes_div,
.themes_div>img{
	position:absolute;
	left:0px;
	top:0px;
	width:183px;
	height:132px;
}

.themes_div_focus{
	position:absolute;
	left:-29px;
	top:-24px;
	width:241px;
	height:180px;
	background-image:url(images/favorite_focus.png);
	z-index:10;
}
.themes_div_focus>img{
	position:absolute;
	left:20px;
	top:20px;
	width:201px;
	height:137px;
}
</style>
</head>

<body >
<div style="position:absolute; top:0px; left:0px; width:1280px; height:720px; ">
    <!--nav-->
    <div class="menu">
		<div id="nav_0" class="_nav">
        	<img id="icon_0" src="images/navIcon_0.png" >
            <span id="navText_0" >推荐</span>
        </div>
        <div id="nav_1" class="_nav">
        	<img id="icon_1" src="images/navIcon_1.png">
        	<span id="navText_1" >直播</span>
		</div>
        <div id="nav_2" class="_nav">
        	<img id="icon_2" src="images/navIcon_2.png" >
       	    <span id="navText_2" >点播</span>
        </div>
		<div id="nav_3" class="_nav">
        	<img id="icon_3" src="images/navIcon_3.png" >
        	<span id="navText_3" >各省</span>
        </div>
		<div id="nav_4" class="_nav">
        	<img id="icon_4" src="images/navIcon_4.png">
        	<span id="navText_4" >专题</span>
        </div>
	</div>
    
    <!--D1_a1 - themes-->
    <div style="position:absolute; left:234px; top:80px; width:956px; height:560px;">
    <!--width="184" height="116"-->
    	<!--1-->
        <div id="area1_box_0" style="position:absolute; left:0px; top:0px;">
            <div id="area1_0" class="themes_div"><img id="area1_img_0" ></div>
        </div>
        <div id="area1_box_1" style="position:absolute; left:193px; top:0px;">
            <div id="area1_1" class="themes_div"><img id="area1_img_1" ></div>
        </div>
        <div id="area1_box_2" style="position:absolute; left:386px; top:0px;">
            <div id="area1_2" class="themes_div"><img id="area1_img_2" ></div>
        </div>
        <div id="area1_box_3" style="position:absolute; left:579px; top:0px;">
            <div id="area1_3" class="themes_div"><img id="area1_img_3" ></div>
        </div>
        <div id="area1_box_4" style="position:absolute; left:772px; top:0px;">
            <div id="area1_4" class="themes_div"><img id="area1_img_4" ></div>
        </div>
        <!--2-->
        <div id="area1_box_5" style="position:absolute; left:0px; top:142px;">
            <div id="area1_5" class="themes_div"><img id="area1_img_5" ></div>
        </div>
        <div id="area1_box_6" style="position:absolute; left:193px; top:142px;">
            <div id="area1_6" class="themes_div"><img id="area1_img_6" ></div><!--放大:left-10 top-5 width204 height126 加亮背景 241*164-->
        </div>
        <div id="area1_box_7" style="position:absolute; left:386px; top:142px;">
            <div id="area1_7" class="themes_div"><img id="area1_img_7" ></div>
        </div>
        <div id="area1_box_8" style="position:absolute; left:579px; top:142px;">
            <div id="area1_8" class="themes_div"><img id="area1_img_8" ></div>
        </div>
        <div id="area1_box_9" style="position:absolute; left:772px; top:142px;">
            <div id="area1_9" class="themes_div"><img id="area1_img_9" ></div>
        </div>
        <!--3-->
        <div id="area1_box_10" style="position:absolute; left:0px; top:284px;">
            <div id="area1_10" class="themes_div"><img id="area1_img_10" ></div>
        </div>
        <div id="area1_box_11" style="position:absolute; left:193px; top:284px;">
            <div id="area1_11" class="themes_div"><img id="area1_img_11" ></div>
        </div>
        <div id="area1_box_12" style="position:absolute; left:386px; top:284px;">
            <div id="area1_12" class="themes_div"><img id="area1_img_12" ></div>
        </div>
        <div id="area1_box_13" style="position:absolute; left:579px; top:284px;">
            <div id="area1_13" class="themes_div"><img id="area1_img_13" ></div>
        </div>
        <div id="area1_box_14" style="position:absolute; left:772px; top:284px;">
            <div id="area1_14" class="themes_div"><img id="area1_img_14" ></div>
        </div>
        <!--4-->
        <div id="area1_box_15" style="position:absolute; left:0px; top:426px;">
            <div id="area1_15" class="themes_div"><img id="area1_img_15" ></div>
        </div>
        <div id="area1_box_16" style="position:absolute; left:193px; top:426px;">
            <div id="area1_16" class="themes_div"><img id="area1_img_16" ></div>
        </div>
        <div id="area1_box_17" style="position:absolute; left:386px; top:426px;">
            <div id="area1_17" class="themes_div"><img id="area1_img_17" ></div>
        </div>
        <div id="area1_box_18" style="position:absolute; left:579px; top:426px;">
            <div id="area1_18" class="themes_div"><img id="area1_img_18" ></div>
        </div>
        <div id="area1_box_19" style="position:absolute; left:772px; top:426px;">
            <div id="area1_19" class="themes_div"><img id="area1_img_19" ></div>
        </div>
    </div>
    <!--slider-->
    <div style="position:absolute; left:1220px; top:80px; width:8px; height:560px; background-color:#16273d; opacity:0.8; border-radius:4px;">
        <div id="scoller" style="position:absolute; left:1px;; top:1px; width:75%; background-color:#708391; border-radius:4px; visibility:hidden;"></div>
    </div>
    <!--bulletin-->
    <div>
    	<img src="images/bulletin_icon.png" style="position:absolute; left:250px; bottom:5px; width:48px; height:40px;"/>
    	<marquee id="scroll_txt" class="bulletin_text" style="width:917px;"></marquee>
	</div>
</div>

<!--<div id="test" style="position:absolute; left:200px; top:500px; width:600px; height:200px; color:#CF0; font-size:14px;"></div>
-->
</body>
</html>

<script type="text/javascript" src="js/focus_logic.js"></script>
<script type="text/javascript" src="js/utils.js"></script>
<script type="text/javascript">

	var area0,area1;
	var menu_urls = ["portal.jsp","live.jsp","vod.jsp","","theme.jsp"];
	var _t;
	var favorite_code = "<%=favorite_all_code%>";
	var category_list = new Array();
	var area1_select_index = 0;
	
	var cookie_focus = "favorite";
	var _focusArr = get_focus(cookie_focus,[0,3,1,1,0,1]);
	delCookie(cookie_focus);

	window.onload = function(){
		loadElement();
		loadData();
		loadScrollTxt();
		setTimeout("window.focus()",1);

	}
	function loadElement(){
		area0 = focus_logic.loadElements(5,1,"nav_","_nav _nav_focus","_nav",[-1,-1,-1,1]);
		area1 = focus_logic.loadElements(4,5,"area1_","themes_div_focus","themes_div",[-1,[0,3],-1,-1]);
		setAreaAttr();
		focus_logic.page.setCurrentFocus(_focusArr[0],_focusArr[1]);	

	}
	function setAreaAttr(){
		//----------------------------------------------area0
		area0.curDomIndex = 3;
		area0.doms[3].blurClassName = "_nav _nav_select";
		area0.okEvent = function(){
			window.location.href = menu_urls[area0.curDomIndex];
		}
		//----------------------------------------------area1
		area1.pageNumber = _focusArr[2];
		area1.pageTurnEvent = function(){
			bindData();
		}
		area1.okEvent = function(){
			set_focus(cookie_focus);
			var _offset = (area1.pageNumber-1)*area1.domsMaxLength;
			var categoryName = encodeURIComponent(encodeURIComponent(category_list[_offset+area1.curDomIndex].category_name));
			window.location.href = "favorite_list.jsp?category_id=" + category_list[_offset+area1.curDomIndex].category_id + "&category_name=" + categoryName + "&backUrl=favorite.jsp";
			/*
			if(category_list[_offset+area1.curDomIndex].subexist == 1){
				//window.location.href = "favorite_content.jsp?category_id=190403&category_name="+categoryName;
				window.location.href = "favorite_content.jsp?category_id="+category_list[_offset+area1.curDomIndex].category_id+"&category_name="+categoryName;
			}else{
				window.location.href = "favorite_list.jsp?category_id="+category_list[_offset+area1.curDomIndex].category_id+"&category_name="+categoryName;
			}
			*/
		}
		//---------------------------------------------------page
		focus_logic.page.backEvent = function(){
			window.location.href = "../index.jsp?backFlag=1";
		}
	}
	//------------------------------------------
	function loadData(){
		focus_logic.getDataByAjax("<%=data_path%>?Action=vod_categories&category_id="+favorite_code+"&len_px=100&posterflag=2",load_category_list);
	}
	function load_category_list(result){
		category_list = eval('('+result+')');
		area1.setDataCount(category_list.length,"area1_box_");
		if(category_list.length>area1.domsMaxLength){
			$("scoller").style.visibility="visible";	
		}else{
			$("scoller").style.visibility="hidden";		
		}
		bindData();
	}
	function bindData(){
		var _offset = (area1.pageNumber-1)*area1.domsMaxLength;
		for(var i=0;i<area1.domsCount;i++){
			if(category_list[i].category_picPath != ""){
				$("area1_img_"+i).src = category_list[i+_offset].category_picPath;
			}
		}
		var tmpPage_1 = area1.pageNumber==1?0:(area1.pageNumber-1);
		var tmpPage_2 = area1.pageTotal==1?1:(area1.pageTotal-1);
		$("scoller").style.top = parseInt((tmpPage_1/area1.pageTotal)*558)+"px";
		$("scoller").style.height = parseInt((1/area1.pageTotal)*558)+"px";
		//document.getElementById("test").innerHTML = document.cookie;
	}

	function set_focus_ex_favorite(name){
		var _pageObj = focus_logic.page;
		var _AreaObj = _pageObj.areas[_pageObj.curAreaIndex];
		var _parent_focus_str;
		if(_AreaObj.parentAreaIndex == undefined){
			_parent_focus_str = "&"+0+"&"+area1_select_index+"&"+1;
		}else{
			_parent_focus_str = "&"+_AreaObj.parentAreaIndex+"&"+area1_select_index+"&"+_pageObj.areas[_AreaObj.parentAreaIndex].pageNumber;
		}
		setCookie(name,_pageObj.curAreaIndex+"&"+_AreaObj.curDomIndex+"&"+_AreaObj.pageNumber+_parent_focus_str);
	}
	
	function menu_change(){
		if(menu_urls[area0.curDomIndex] != ""){
			window.location.href = menu_urls[area0.curDomIndex];
		}
		delCookie("area1_pageNumber");
	}
	
	function loadScrollTxt(){
		focus_logic.getDataByAjax("<%=data_path%>?Action=vod_categories&category_id=<%=scroll_txt_code%>&length=1",load_scroll_txt);
	}
	
	function load_scroll_txt(result){
		var scroll_obj = eval('('+result+')');
		if(scroll_obj.length>0){
			$("scroll_txt").innerHTML = scroll_obj[0].category_introduce;
		}
	}
	
</script>




